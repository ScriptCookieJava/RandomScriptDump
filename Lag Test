import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import java.util.List;

/**
 * Humongous Random Fun Simulator
 * - Thousands of moving shapes
 * - Multiple colors and sizes
 * - Bouncing, colliding, and interactive
 * - Made by ScriptCookie
 */
public class RandomFunSimulator extends JPanel implements ActionListener {

    private final int WIDTH = 1200;
    private final int HEIGHT = 800;
    private final int NUM_SHAPES = 1000; // scale to thousands
    private List<ShapeEntity> shapes = new ArrayList<>();
    private javax.swing.Timer timer;

    public RandomFunSimulator() {
        setPreferredSize(new Dimension(WIDTH, HEIGHT));
        setBackground(Color.BLACK);
        // Generate thousands of random shapes
        Random rand = new Random();
        for (int i = 0; i < NUM_SHAPES; i++) {
            shapes.add(new ShapeEntity(
                    rand.nextInt(WIDTH), rand.nextInt(HEIGHT),
                    rand.nextInt(30) + 10,
                    rand.nextInt(10) - 5,
                    rand.nextInt(10) - 5,
                    new Color(rand.nextInt(256), rand.nextInt(256), rand.nextInt(256)),
                    rand.nextBoolean()
            ));
        }

        timer = new javax.swing.Timer(16, this); // 60 FPS
        timer.start();

        // Optional: handle mouse click
        addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                // Spawn 50 more random shapes per click
                for (int i = 0; i < 50; i++) {
                    shapes.add(new ShapeEntity(
                            rand.nextInt(WIDTH), rand.nextInt(HEIGHT),
                            rand.nextInt(30) + 10,
                            rand.nextInt(10) - 5,
                            rand.nextInt(10) - 5,
                            new Color(rand.nextInt(256), rand.nextInt(256), rand.nextInt(256)),
                            rand.nextBoolean()
                    ));
                }
            }
        });
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;

        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

        for (ShapeEntity s : shapes) {
            g2d.setColor(s.color);
            if (s.isCircle) {
                g2d.fillOval((int) s.x, (int) s.y, s.size, s.size);
            } else {
                g2d.fillRect((int) s.x, (int) s.y, s.size, s.size);
            }
        }

        g2d.setColor(Color.WHITE);
        g2d.drawString("Random Fun Simulator - Made by ScriptCookie", 10, 20);
        g2d.drawString("Shapes: " + shapes.size(), 10, 40);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        for (ShapeEntity s : shapes) {
            s.x += s.dx;
            s.y += s.dy;

            // Bounce off walls
            if (s.x < 0 || s.x > WIDTH - s.size) s.dx = -s.dx;
            if (s.y < 0 || s.y > HEIGHT - s.size) s.dy = -s.dy;

            // Simple collision with other shapes
            for (ShapeEntity other : shapes) {
                if (other == s) continue;
                double dist = Math.hypot(s.x - other.x, s.y - other.y);
                if (dist < s.size) {
                    s.dx = -s.dx;
                    s.dy = -s.dy;
                }
            }
        }
        repaint();
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame("Random Fun Simulator");
        RandomFunSimulator panel = new RandomFunSimulator();
        frame.add(panel);
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    static class ShapeEntity {
        double x, y;
        double dx, dy;
        int size;
        Color color;
        boolean isCircle;

        public ShapeEntity(double x, double y, int size, double dx, double dy, Color color, boolean isCircle) {
            this.x = x;
            this.y = y;
            this.size = size;
            this.dx = dx;
            this.dy = dy;
            this.color = color;
            this.isCircle = isCircle;
        }
    }
}
